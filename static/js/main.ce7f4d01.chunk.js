(this.webpackJsonpli=this.webpackJsonpli||[]).push([[0],{74:function(e,t,r){},75:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(29),s=r.n(a),o=r(14),i=r(82),d=r(80),l=r(81),j=r(64),u=r(0),b=r.n(u),h=r(6),O=r(84),x=r(83),f=r(85),m=r(77),p=r(78),v=r(2),k=r(62),g=r(26),B=Object(k.a)({apiKey:"AIzaSyCnnddIJlBVk8bAxkULLQaQNA2aBilgdn4",authDomain:"system-of-medicine.firebaseapp.com",projectId:"system-of-medicine",storageBucket:"system-of-medicine.appspot.com",messagingSenderId:"791780435590",appId:"1:791780435590:web:fcef39d82f11f15a4c5307",measurementId:"G-690XXH2QPQ"}),y=Object(g.g)(B),A=Object(g.b)(y,"books"),w=new function e(){Object(v.a)(this,e),this.addBooks=function(e){return Object(g.a)(A,e)},this.updateBook=function(e,t){var r=Object(g.d)(y,"books",e);return Object(g.h)(r,t)},this.deleteBook=function(e){var t=Object(g.d)(y,"books",e);return Object(g.c)(t)},this.getAllBooks=function(){return Object(g.f)(A)},this.getBook=function(e){var t=Object(g.d)(y,"books",e);return Object(g.e)(t)}},I=r(3),N=function(e){var t=e.id,r=e.setBookId,n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],d=Object(c.useState)(""),l=Object(o.a)(d,2),j=l[0],u=l[1],v=Object(c.useState)("Available"),k=Object(o.a)(v,2),g=k[0],B=k[1],y=Object(c.useState)(!0),A=Object(o.a)(y,2),N=A[0],S=A[1],C=Object(c.useState)({error:!1,msg:""}),T=Object(o.a)(C,2),D=T[0],E=T[1],F=function(){var e=Object(h.a)(b.a.mark((function e(c){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),E(""),""!==s&&""!==j){e.next=5;break}return E({error:!0,msg:"All fields are mandatory!"}),e.abrupt("return");case 5:if(n={title:s,author:j,status:g},console.log(n),e.prev=7,void 0===t||""===t){e.next=15;break}return e.next=11,w.updateBook(t,n);case 11:r(""),E({error:!1,msg:"Updated successfully!"}),e.next=18;break;case 15:return e.next=17,w.addBooks(n);case 17:E({error:!1,msg:"New Book added successfully!"});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(7),E({error:!0,msg:e.t0.message});case 23:i(""),u("");case 25:case"end":return e.stop()}}),e,null,[[7,20]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(b.a.mark((function e(){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(""),e.prev=1,e.next=4,w.getBook(t);case 4:r=e.sent,console.log("the record is :",r.data()),i(r.data().title),u(r.data().author),B(r.data().status),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),E({error:!0,msg:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){console.log("The id here is : ",t),void 0!==t&&""!==t&&L()}),[t]),Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:"p-4 box",children:[(null===D||void 0===D?void 0:D.msg)&&Object(I.jsx)(O.a,{variant:(null===D||void 0===D?void 0:D.error)?"danger":"success",dismissible:!0,onClose:function(){return E("")},children:null===D||void 0===D?void 0:D.msg}),Object(I.jsxs)(x.a,{onSubmit:F,children:[Object(I.jsx)(x.a.Group,{className:"mb-3",controlId:"formBookTitle",children:Object(I.jsxs)(f.a,{children:[Object(I.jsx)(f.a.Text,{id:"formBookTitle",children:"B"}),Object(I.jsx)(x.a.Control,{type:"text",placeholder:"Book Title",value:s,onChange:function(e){return i(e.target.value)}})]})}),Object(I.jsx)(x.a.Group,{className:"mb-3",controlId:"formBookAuthor",children:Object(I.jsxs)(f.a,{children:[Object(I.jsx)(f.a.Text,{id:"formBookAuthor",children:"A"}),Object(I.jsx)(x.a.Control,{type:"text",placeholder:"Book Author",value:j,onChange:function(e){return u(e.target.value)}})]})}),Object(I.jsxs)(m.a,{"aria-label":"Basic example",className:"mb-3",children:[Object(I.jsx)(p.a,{disabled:N,variant:"success",onClick:function(e){B("Available"),S(!0)},children:"Available"}),Object(I.jsx)(p.a,{variant:"danger",disabled:!N,onClick:function(e){B("Not Available"),S(!1)},children:"Not Available"})]}),Object(I.jsx)("div",{className:"d-grid gap-2",children:Object(I.jsx)(p.a,{variant:"primary",type:"Submit",children:"Add/ Update"})})]})]})})},S=r(5),C=r(79),T=function(e){var t=e.getBookId,r=Object(c.useState)([]),n=Object(o.a)(r,2),a=n[0],s=n[1];Object(c.useEffect)((function(){i()}),[]);var i=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAllBooks();case 2:t=e.sent,console.log(t.docs),s(t.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.deleteBook(t);case 2:i();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"mb-2",children:Object(I.jsx)(p.a,{variant:"dark edit",onClick:i,children:"Refresh List"})}),Object(I.jsxs)(C.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:"#"}),Object(I.jsx)("th",{children:"Book Title"}),Object(I.jsx)("th",{children:"Book Author"}),Object(I.jsx)("th",{children:"Status"}),Object(I.jsx)("th",{children:"Action"})]})}),Object(I.jsx)("tbody",{children:a.map((function(e,r){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:r+1}),Object(I.jsx)("td",{children:e.title}),Object(I.jsx)("td",{children:e.author}),Object(I.jsx)("td",{children:e.status}),Object(I.jsxs)("td",{children:[Object(I.jsx)(p.a,{variant:"secondary",className:"edit",onClick:function(r){return t(e.id)},children:"Edit"}),Object(I.jsx)(p.a,{variant:"danger",className:"delete",onClick:function(t){return d(e.id)},children:"Delete"})]})]},e.id)}))})]})]})};r(74);var D=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),r=t[0],n=t[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(i.a,{bg:"dark",variant:"dark",className:"header",children:Object(I.jsx)(d.a,{children:Object(I.jsx)(i.a.Brand,{href:"#home",children:"Library - Firebase CRUD"})})}),Object(I.jsx)(d.a,{style:{width:"400px"},children:Object(I.jsx)(l.a,{children:Object(I.jsx)(j.a,{children:Object(I.jsx)(N,{id:r,setBookId:n})})})}),Object(I.jsx)(d.a,{children:Object(I.jsx)(l.a,{children:Object(I.jsx)(j.a,{children:Object(I.jsx)(T,{getBookId:function(e){console.log("The ID of document to be edited: ",e),n(e)}})})})})]})};s.a.render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(D,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.ce7f4d01.chunk.js.map